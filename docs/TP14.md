# Hubble

Verifier que Cilium est ok :
```shell
cilium status
```
Lancer les tests de connectivité :
```shell
cilium connectivity  test
```

Huble ne peut être installé en même temps en CLI et en Helm.
Si on fait en Helm il faut s'assurer que le paragraphe est présent :
```yaml
hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true
```
On lance ensuite Hubble :
```bash
cilium hubble ui &
```
L'UI écoute sur port 12000 :
```
# ℹ️  Opening "http://localhost:12000" in your browser...
```
Reperez l'@IP de la VM :
# ifconfig eth0
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet **46.101.186.172**  netmask 255.255.192.0  broadcast 46.101.191.255
        inet6 fe80::47a:17ff:fea2:b9e9  prefixlen 64  scopeid 0x20<link>
        ether 06:7a:17:a2:b9:e9  txqueuelen 1000  (Ethernet)
        RX packets 85068  bytes 1689421494 (1.6 GB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 31382  bytes 5277651 (5.2 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

Connectez-vous sur http://46.101.186.172:12000

## Annexes

Si tout est OK,installer Hubble dans le Cluster
```shell
cilium hubble enable --create-ca --ui
```
L'installation est assez longue...

Si le pod huble-relay est en erreur, choisir une image dans [https://quay.io/repository/cilium/hubble-relay?tab=tags&tag=v0.0.2](https://quay.io/repository/cilium/hubble-relay?tab=tags&tag=v0.0.2) (par ex v1.10.13)

Lancer le portail:

```shell
cilium hubble ui
```

Le navigateur s'ouvre !

[Revenir au sommaire](../README.md) | [TP Suivant](./TP13.md)